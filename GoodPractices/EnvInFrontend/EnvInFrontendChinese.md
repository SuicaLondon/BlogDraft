# Web å‰ç«¯æ€éº¼è™•ç†ç’°å¢ƒè®Šæ•¸ï¼Ÿè«‡è«‡æˆ‘é€™é‚Šçš„åšæ³•

å…¶å¯¦æˆ‘ä¸€ç›´éƒ½æœ‰é»ä¸å¤ªæƒ³ç¢°é€™å€‹è©±é¡Œï¼Œå› ç‚ºé€™å€‹å•é¡Œå¤ªåŸºç¤åˆæœ‰é»å¤ªå»£äº†ï¼Œæˆ‘ä¸€ç›´æ²’æœ‰è‡ªä¿¡èƒ½è¬›å¥½é€™å€‹è©±é¡Œï¼Œä¸éå› ç‚ºä¸€äº›çœ¾æ‰€é€±çŸ¥çš„äº‹æƒ…ï¼Œæˆ‘è¦ºå¾—é‚„æ˜¯è‡³å°‘åˆ†äº«ä¸‹æˆ‘çš„ä¸€äº›è§€é»ï¼Œä»¥åŠè·Ÿæœ‹å‹å€‘è¨è«–ä¹‹å¾Œçš„ä¸€äº›å¿ƒå¾—ã€‚

ç„¡è«–å‰å¾Œç«¯ï¼Œç’°å¢ƒè®Šæ•¸(ç’°å¢ƒè®Šé‡ï¼ŒEnvironment Variable)éƒ½æ˜¯ä¸€å€‹éå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä»–å¯ä»¥ç”¨ä¾†çµ¦ä½ çš„ç¨‹å¼æä¾›ä¸€äº› contextï¼Œæ¯”å¦‚èªªä½ æ­£åœ¨é–‹ç™¼çš„ç’°å¢ƒé‚„æ˜¯ç”Ÿç”¢ç’°å¢ƒï¼Œæˆ–è€…èªªä½ æ­£åœ¨é–‹ç™¼çš„ç’°å¢ƒæ˜¯æœ¬åœ°é‚„æ˜¯é ç«¯ï¼Œæˆ–è€…èªªä½ æ­£åœ¨éƒ¨ç½²çš„å¾Œç«¯ URLï¼Œä¸€äº› SASS çš„ keyï¼Œé€™äº›éƒ½æ˜¯ç’°å¢ƒè®Šæ•¸å¯ä»¥å¹«åŠ©ä½ è§£æ±ºçš„å•é¡Œã€‚ç„¶å¾Œé€™å€‹å•é¡Œé›£è¬›çš„é—œéµåœ¨æ–¼ï¼Œé€™å€‹å•é¡Œé›£è¬›çš„é—œéµåœ¨æ–¼ï¼Œä¸åŒçš„ project å¯èƒ½æœ‰ä¸åŒçš„ the best practiceï¼Œç”šè‡³æœ‰å¯èƒ½ä¸å­˜åœ¨ the best practiceï¼Œæˆ‘è¦ªçœ¼è¦‹éå…©å€‹ Senior Frontend Developer å› ç‚ºé€™å€‹å•é¡Œåµèµ·ä¾†ã€‚è€Œä¸”é‚„æœ‰ä¸€é»ï¼Œä½ å¿…é ˆè¦æ·±åˆ»ç†è§£é€™å€‹ project ï¼Œæ‰èƒ½å¤ çŸ¥é“ä»€éº¼æ˜¯åˆé©çš„ practiceã€‚

## ä¸€äº›åŸºç¤çŸ¥è­˜

ç„¡è«–ä½ æ˜¯ç”¨ä»€éº¼èªè¨€ï¼Œä»€éº¼æ¡†æ¶ï¼Œä»€éº¼å·¥å…·ï¼Œå‰ç«¯æˆ–è€…å¾Œç«¯ï¼Œä½ éƒ½å¿…é ˆè¦ç†è§£ç’°å¢ƒè®Šæ•¸çš„æ¦‚å¿µï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ã€‚

### .env

é€šå¸¸ä½ è‡³å°‘æœƒæœ‰ä¸€å€‹.env æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆé€šå¸¸æœƒæ”¾åœ¨ä½ çš„ project çš„æ ¹ç›®éŒ„ï¼Œé€™å€‹æª”æ¡ˆé€šå¸¸æœƒåŒ…å«ä¸€äº›ç’°å¢ƒè®Šæ•¸ï¼Œæ¯”å¦‚èªªä½ æ­£åœ¨é–‹ç™¼çš„ç’°å¢ƒé‚„æ˜¯ç”Ÿç”¢ç’°å¢ƒï¼Œæˆ–è€…èªªä½ æ­£åœ¨é–‹ç™¼çš„ç’°å¢ƒæ˜¯æœ¬åœ°é‚„æ˜¯é ç«¯ï¼Œæˆ–è€…èªªä½ æ­£åœ¨éƒ¨ç½²çš„å¾Œç«¯ URLï¼Œä¸€äº› SAAS çš„ keyï¼Œé€™äº›éƒ½æ˜¯ç’°å¢ƒè®Šæ•¸å¯èƒ½å¯ä»¥å¹«åŠ©ä½ è§£æ±ºçš„å•é¡Œã€‚

#### å¦‚ä½•ä½¿ç”¨ .env

é¦–å…ˆåœ¨ä½ çš„æ ¹ç›®éŒ„å‰µå»ºä¸€å€‹.env æª”æ¡ˆ

```bash
# .env
API_URL=https://api.example.com
```

ç„¶å¾Œåœ¨ä½ çš„ TypeScript code å¯ä»¥é€™æ¨£ä½¿ç”¨

```TypeScript
const apiUrl = process.env.API_URL
```

ä¸éå¦‚æœä½ ç†Ÿæ‚‰ TypeScript, å»æŸ¥çœ‹ apiUrl çš„ type æœƒæ˜¯ string | undefinedï¼Œé€™æ˜¯å› ç‚ºä½ æ²’è¾¦æ³•ä¿è­‰é€™å€‹ç’°å¢ƒè®Šæ•¸ä¸€å®šæœƒå­˜åœ¨ï¼Œæ‰€ä»¥ä½ å¿…é ˆè¦è€ƒæ…®åˆ°é€™å€‹æƒ…æ³ã€‚ç„¶å¾Œé€™å€‹å°±å‡ºç¾äº†ç¬¬ä¸€å€‹çˆ­è­°é»ï¼šæ˜¯å¦éœ€è¦çµ¦ç’°å¢ƒè®Šæ•¸ä¸€å€‹ defaultValueï¼Ÿ

```TypeScript
const apiUrl = process.env.API_URL || 'http://localhost:8000'
```

> Vite çš„ `import.meta.env.VITE_API_URL` type æ˜¯ stringï¼Œä½†æˆ‘å…ˆä¸æƒ³è©•è«–ï¼Œæ€•æ¨¡ç³Šç„¦é»

è®“æˆ‘åœ¨é€™è£¡å…ˆè²·å€‹é—œå­ï¼Œé€™å€‹å•é¡Œçš„ç­”æ¡ˆæ˜¯ï¼šä¸ä¸€å®šï¼Œç„¶å¾Œæˆ‘æœƒåœ¨å¾Œé¢è§£é‡‹ã€‚

#### .env çš„ç¨®é¡

é™¤äº†.env ä¹‹å¤–ï¼Œæˆ‘å€‘ç¶“å¸¸é‚„éœ€è¦å…¶ä»–ä¸€äº›.env è®Šé«”ï¼Œå¾è€Œè®“å‰ç«¯å¯ä»¥æ–¹ä¾¿åœ°è¨ªå•ä¸åŒç’°å¢ƒçš„å¾Œç«¯ URLï¼Œå¾è€Œæ¨¡æ“¬å¾©ç¾ä¸åŒç’°å¢ƒçš„å•é¡Œã€‚

é€šå¸¸æˆ‘å€‘é‚„æœƒæœ‰

```
# dev/æ¸¬è©¦ç’°å¢ƒï¼Œç„¶å¾Œä½ ä¹Ÿå¯ä»¥æŒ‰ä½ çš„éœ€æ±‚ä¾†æ±ºå®šæ€éº¼è™•ç†qaç’°å¢ƒ
.env.development
# ç”Ÿç”¢ç’°å¢ƒ
.env.production
# stagingç’°å¢ƒï¼Œä½ ä¹Ÿå¯ä»¥å«ä»–uat
.env.staging
# æ¸¬è©¦ç’°å¢ƒ
.env.test
# æœ¬åœ°ç’°å¢ƒ
.env.local
```

åŒæ™‚ï¼Œæˆ‘å€‘ä¸€èˆ¬é‚„æœƒç¶­è­·ä¸€å€‹å«.env.example çš„æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆä½œç‚ºä¸€å€‹æ–‡æª”æœƒåŒ…å«æ‰€æœ‰å¯èƒ½
çš„ç’°å¢ƒè®Šæ•¸ï¼Œå¾è€Œè®“é–‹ç™¼è€…å¯ä»¥æ–¹ä¾¿åœ°çŸ¥é“å“ªäº›ç’°å¢ƒè®Šæ•¸æ˜¯å¯ç”¨çš„ï¼Œä»¥åŠä»–å€‘çš„ç”¨é€”ã€‚

### ç’°å¢ƒè®Šæ•¸çš„ç¨®é¡

æ­£å¦‚å‰æ–‡æ‰€èªªï¼Œ.env èƒ½åšçš„äº‹æƒ…å¾ˆå¤šï¼Œæ‰€ä»¥æ‰€å­˜æ”¾çš„ç’°å¢ƒè®Šæ•¸è‡ªç„¶ä¹Ÿæœ‰ä¸åŒçš„é¡å‹ï¼Œæˆ‘å€‘å¯ä»¥åˆ†ç‚ºä»¥ä¸‹å¹¾ç¨®ï¼š

1. çœŸÂ·ç’°å¢ƒè®Šæ•¸ï¼šå¾Œç«¯ URLï¼Œç•¶å‰æ‰€é‹è¡Œçš„ç’°å¢ƒï¼ˆæ–¼å¾Œç«¯åŒæ­¥ï¼‰

2. é…ç½®è®Šæ•¸ï¼šæ¯”å¦‚èªªä¸€äº›åŠŸèƒ½é–‹é—œæˆ–è€…å…¨å±€éœæ…‹å¯é…ç½®è®Šæ•¸ä¹‹é¡çš„

3. æ•æ„Ÿè®Šæ•¸ï¼šæ¯”å¦‚èªªä¸€äº› API keyï¼Œæˆ–è€…ä¸€äº›æ•æ„Ÿçš„è³‡æ–™

1 å’Œ 2 å…¶å¯¦å¯ä»¥åˆä½µèµ·ä¾†ï¼Œå®Œå…¨å–æ±ºæ–¼ä½ çš„éœ€æ±‚ã€‚ç¸½çš„ä¾†èªªå°±å…©å€‹å¤§åˆ†é¡ï¼šèƒ½çµ¦ç”¨æˆ¶çœ‹çš„å’Œä¸èƒ½çµ¦ç”¨æˆ¶çœ‹çš„ã€‚

### å‰ç«¯å’Œå¾Œç«¯å°æ–¼ç’°å¢ƒè®Šæ•¸è™•ç†çš„å€åˆ¥

é€™æ˜¯ä¸€å€‹éå¸¸ç°¡å–®çš„é‚è¼¯ï¼Œä½†å‡¡ä½ æœ‰ä¸€é»å…¨æ£§ç¶“é©—ï¼Œä½ éƒ½æœƒçŸ¥é“å‰ç«¯å’Œå¾Œç«¯å®Œå…¨æ˜¯å…©å€‹å®Œå…¨ä¸åŒçš„ä¸–ç•Œï¼Œå¾é—œæ³¨çš„é»åˆ°æ€è€ƒçš„é‚è¼¯éƒ½å®Œå…¨ä¸åŒï¼Œå¦„åœ–ç”¨ä¸€å¥—æ–¹æ¡ˆè§£æ±ºå…©å€‹å®Œå…¨ä¸åŒçš„å•é¡Œï¼Œåªæœƒè®“ä½ é™·å…¥ç„¡ç›¡çš„ç—›è‹¦ã€‚

æˆ‘é€™è£¡åªèˆ‰å…©å€‹ä¾‹å­

1. å‰ç«¯é€šå¸¸ä¸å­˜çœŸæ­£çš„ secretï¼Œè€Œå¾Œç«¯è¦è€ƒæ…®æ€éº¼ç²å–é€™äº› secret
2. å‰ç«¯é‚„æœƒåœ¨ build ä¸Šå€åˆ† dev/test/prodï¼Œè€Œå¾Œç«¯å‰‡ä¸ä¸€å®šï¼Œå–æ±ºæ–¼èªè¨€

#### å‰ç«¯é€šå¸¸ä¸å­˜çœŸæ­£çš„ secretï¼Œè€Œå¾Œç«¯è¦è€ƒæ…®æ€éº¼ç²å–é€™äº› secret

é€šå¸¸åªæœ‰çœŸæ­£çš„`**`æ‰æœƒæŠŠçœŸæ­£çš„ secret æ”¾åœ¨å‰ç«¯ï¼Œå› ç‚ºé€™äº›è®Šæ•¸éƒ½æœƒè¢«ç™¼é€åˆ°å‰ç«¯ï¼Œç†è«–ä¸Šç”¨æˆ¶éƒ½æ˜¯å¯ä»¥è¨ªå•åˆ°çš„ã€‚å› æ­¤ä¸€äº›ç¬¬ä¸‰æ–¹ SAAS çš„æ¶æ§‹æ¯”å¦‚ Clerk çµ¦å‰ç«¯çš„éƒ½æ˜¯ public keyï¼Œç„¶å¾Œé«’æ´»ç´¯æ´»éƒ½äº¤çµ¦å¾Œç«¯ä¾†åšã€‚å› æ­¤å¾Œç«¯éœ€è¦æ“å¿ƒæ€éº¼è™•ç†é€™äº› secretï¼Œè€Œå‰ç«¯å‰‡åŸºæœ¬ä¸ç”¨è€ƒæ…®ã€‚

> å¾Œç«¯æ€éº¼ç®¡ç† secret ä¸åœ¨æœ¬æ–‡è¨è«–ç¯„åœ ğŸ˜ˆ æˆ‘å°±ä¸å¯«äº† ä½ å€‘æ„›ç”¨å“ªå®¶ secret management å°±ç”¨å“ªå®¶

ç„¶å¾Œéš¨è‘—ä½ çš„å¾Œç«¯ä»£ç¢¼å¢é•·ï¼Œæˆ–è€…ä½ æ¥å…¥æ›´å¤šçš„ç¬¬ä¸‰æ–¹ APIsï¼Œä½ çš„.env æª”æ¡ˆå¿…ç„¶æœƒè¶Šä¾†è¶Šå¤§ï¼Œæœ€å¾Œä½ æœƒç™¼ç¾ä½ çš„.env æª”æ¡ˆè®Šå¾—éå¸¸é›£ä»¥ç®¡ç†ï¼Œæ–¼æ­¤åŒæ™‚å‰ç«¯çš„.env æª”æ¡ˆå°±è·Ÿæˆ‘çš„éŒ¢åŒ…ä¸€æ¨£ç©ºç©ºå¦‚ä¹Ÿã€‚ç”šè‡³æœ‰äº›å‰ç«¯æ¶æ§‹ç›´æ¥å®Œå…¨ä¸ç”¨.env äº†ã€‚

> æœ‰å€‹åä¾‹æ˜¯ï¼Œå¦‚æœä½ åœ¨ç”¨ Flutterï¼Œæˆ–è€…é€²è¡Œ App é–‹ç™¼ï¼Œä½ æ˜¯æœƒéœ€è¦ç®¡ç†ä¸€äº› secret çš„ï¼Œæ¯”å¦‚èªª keystoreï¼Œä¸éæœ¬æ–‡å‰ç«¯åªæŒ‡é‚£ç¨®æœƒè·‘åœ¨ç€è¦½å™¨ä¸Šçš„ ğŸ˜¡ã€‚ èª°æ Flutter Web å°±ä¸Ÿé€²æ³°æ™¤å£«æ²³å–‚é°»é­šã€‚

#### å‰ç«¯é‚„æœƒåœ¨ build ä¸Šå€åˆ† dev/test/prodï¼Œè€Œå¾Œç«¯å‰‡ä¸ä¸€å®šï¼Œå–æ±ºæ–¼èªè¨€

ç„¡è«–æ˜¯ Flutter é‚„æ˜¯ä»»æ„ä¸€å€‹ JavaScript Libraryï¼Œå› ç‚ºè¦æ¸²æŸ“ UI ä¸¦ä¸”æ¸›å°‘åˆ°ç”¨æˆ¶æ‰‹è£¡çš„ bundle sizeï¼Œé€šå¸¸éƒ½æœƒæœ‰ä¸åŒçš„æ–¹å¼ä¾† buildã€‚

> Flutter ç”šè‡³é‚„è¦å†å¤šä¸€å€‹ profile modeï¼Œä»‹æ–¼ dev å’Œ release ä¸­é–“

è€Œå¾Œç«¯å‰‡å®Œå…¨å–æ±ºæ–¼èªè¨€ï¼Œæ¯”å¦‚èªª Go å°±æ˜¯æœ‰å€åˆ†çš„ä¾‹å­ï¼Œè€Œ Python å°±æ˜¯æ²’æœ‰çš„ä¾‹å­

å› æ­¤ JavaScript ä¸€å€‹ç‰¹åˆ¥çš„ç’°å¢ƒè®Šæ•¸ `NODE_ENV`ï¼Œé€™å€‹è®Šæ•¸æœƒåœ¨ build çš„æ™‚å€™è¢«è¨­ç½®ï¼Œå¾è€Œè®“å‰ç«¯çŸ¥é“ç•¶å‰æ˜¯ dev/test/prod ç’°å¢ƒã€‚ç„¶å¾Œ`NODE_ENV`ç†è«–ä¸Šæ˜¯å¯ä»¥æ‰‹å‹• overrideï¼Œä¸éå¦‚ä»Šå¤§éƒ¨åˆ† framework å·²ç¶“åœ¨é»‘ç®±è£¡é¢æå‰å¹«ä½  override äº†ã€‚

> å¦‚æœä½ æŠŠ `NODE_ENV` ç•¶æˆä¸€å€‹è¡¨é”é›²ç«¯ç’°å¢ƒçš„è®Šæ•¸ï¼Œæˆ‘è¦ºå¾—ä½ å¯ä»¥ä¸ç”¨å¯«å‰ç«¯äº†

## ç‚ºä»€éº¼ä¸å­˜åœ¨ The best practice

æˆ‘å…¶å¯¦ä¸€ç›´å¾ˆåæ„Ÿ the best practice é€™å€‹è©ï¼Œå› ç‚ºé€™å€‹è©èƒŒå¾Œéš±å«çš„æ„ç¾©æ˜¯ï¼šå­˜åœ¨ä¸€å€‹å”¯ä¸€ä¸”æ­£ç¢ºçš„ç­”æ¡ˆã€‚å·¥ç¨‹å¸«å€‘å°æ–¼ä»»ä½•ä¸€å€‹é ˜åŸŸçš„ç†è§£æ˜¯èºæ—‹ä¸Šå‡çš„ï¼Œæ¯å¹´ä½ çš„é ˜åŸŸéƒ½å¯èƒ½æœƒæœ‰ä¸åŒçš„`META`. ä»Šå¹´å› ç‚ºç¾æœ‰æŠ€è¡“å¾—å‡ºçš„æœ€ä½³å¯¦è¸ï¼Œæ˜å¹´æ–°çš„æŠ€è¡“å‡ºä¾†å¯èƒ½ä½ çš„æ–¹æ¡ˆå°±éæ™‚äº†ã€‚å› æ­¤æˆ‘ä¸€ç›´æœƒä½¿ç”¨ Good practice ä¾†ä»£æ›¿ the best practiceï¼Œåªè¦èƒ½è§£æ±ºå•é¡Œçš„ practice å°±æ˜¯å¥½çš„ practiceã€‚

![Perfect Solution](./perfect-solution.png)

ç„¶å¾Œåœ¨ç’°å¢ƒè®Šæ•¸çš„è™•ç†åœ¨é¢å°ä¸åŒçš„éœ€æ±‚ï¼Œä¹Ÿæœƒéœ€è¦é¢å°ä¸åŒçš„å•é¡Œï¼Œæˆ‘é€™è£¡èˆ‰å¹¾å€‹ä¾‹å­

1. Micro Frontend

åœ¨å¾®å‰ç«¯æ¶æ§‹ä¸­ï¼Œä½ é¢å°çš„ä¸»è¦å•é¡Œå°‡æœƒæ˜¯æ€éº¼ç®¡ç†ä¸åŒå­æ‡‰ç”¨ä¹‹é–“çš„ç’°å¢ƒè®Šæ•¸åŒæ­¥ï¼Œç¹¼æ‰¿å’Œè¦†è“‹ã€‚ç¨å¾®æ€è€ƒä¸€ä¸‹åŠ æ¸›ä¸€å€‹ç’°å¢ƒè®Šæ•¸è¦å° CI/CD é€²è¡Œçš„æ”¹å‹•ï¼Œä¼°è¨ˆæ²’æœ‰äººä¸æœƒé ­ç–¼ï¼Œç„¶å¾Œç¨å¾®ä¸æ³¨æ„ï¼ŒæŸäº›åœ°æ–¹å°±å¿˜è¨˜é…ç½®å¯èƒ½å°±å‚³äº†ä¸€å€‹ç©ºè®Šæ•¸é€² Appï¼Œå› æ­¤ä½ å¯èƒ½éœ€è¦å¼•å…¥é¡å¤–çš„åº«ä¾†å¹«åŠ©ä½ ç®¡ç†é€™äº›ç’°å¢ƒè®Šæ•¸ï¼ŒåŒæ™‚ä½ ä¹Ÿéœ€è¦è€ƒæ…®å¿˜è¨˜åŒæ­¥çš„é¢¨éšªï¼Œå¾è€Œå°ç²å–çš„ç’°å¢ƒè®Šæ•¸é€²è¡Œé¡å¤–çš„é©—è­‰å¯ä»¥èªªæˆç‚ºäº†å¿…é ˆã€‚

2. ç•¶ä½ ä¸æƒ³åˆ‡æ›ç’°å¢ƒçš„æ™‚å€™éœ€è¦é‡æ–° build ä½ çš„ projectï¼Œè€Œæ˜¯ build one deploy everywhere

å¦‚æœä½ æœ‰ç§»å‹•ç«¯é–‹ç™¼çš„ç¶“é©—ï¼Œé‚£éº¼ä½ å°±æœƒå°é€™æ„Ÿåˆ°éå¸¸ç†Ÿæ‚‰ï¼Œç‚ºäº†é¿å…é »ç¹ build çš„è€—æ™‚ï¼Œç›´æ¥æŠŠæŸå¹¾å€‹ç’°å¢ƒçš„ç’°å¢ƒè®Šæ•¸æ‰“åŒ…åˆ°ä½ çš„ App è£¡é¢ï¼Œå¾è€Œè®“ App ç²å¾—å‹•æ…‹åˆ‡æ›ç’°å¢ƒçš„èƒ½åŠ›ã€‚é€šå¸¸æ˜¯åœ¨ç™»éŒ„é é¢æä¾›ä¸€å€‹ç’°å¢ƒè®Šé‡ï¼Œç„¶å¾Œåœ¨æ¸¬è©¦çš„æ™‚å€™å¯ä»¥åœ¨ç™»éŒ„é é¢é¸æ“‡ç™»éŒ„å“ªä¸€å€‹ç’°å¢ƒã€‚é€™ç¨®æƒ…æ³ä½ å¯èƒ½å°±æœƒç›´æ¥æŠŠéƒ¨åˆ†ç’°å¢ƒè®Šæ•¸ç›´æ¥ hardcode åˆ°ä½ çš„ app è£¡é¢æˆ–è€…åŒæ™‚ import å¤šå€‹.env æª”æ¡ˆã€‚

3. å¦‚æœä½ åŒæ™‚æœ‰å¤šå€‹å¾Œç«¯ domainï¼Œä½ éœ€è¦å‹•æ…‹åˆ‡æ›å¾Œç«¯çš„ domain

å…ˆèªªæ˜æˆ‘ç•¶ç„¶æ˜¯çŸ¥é“ CDNï¼Œä¸éå¦‚æœåœ¨äºæ´²å·¥ä½œéçš„ä¼°è¨ˆéƒ½çŸ¥é“åœ¨æŸäº›è¡Œæ¥­æœƒæ¡å–é€™ç¨®æªæ–½ä¾†æ¸›å°‘æŸäº›é¢¨éšªï¼Œç„¶å¾Œé€™å€‹æ–¹æ¡ˆå…¶å¯¦åœ¨æ­ç¾åŒæ¨£çš„è¡Œæ¥­ä¹Ÿéå¸¸å¸¸è¦‹ï¼Œç”šè‡³æŸäº›ç†±é–€è¡Œæ¥­ç›´æ¥æœ‰å€‹ä¸€æ•´å€‹æ¨™æº–å°±æ˜¯åŸºæ–¼é€™å€‹æ–¹æ¡ˆã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œä½ çš„ç’°å¢ƒè®Šæ•¸å¾ˆå¤§ä¸€éƒ¨åˆ†éƒ½æœƒç”±æŸå€‹å¾Œç«¯ APIs ä¾†åˆ†ç™¼ã€‚ç„¶å¾Œé—œæ–¼ App çš„ä¸€äº› configurationï¼Œä½ ä¹Ÿå¯ä»¥å®Œå…¨äº¤ç”±å¾Œç«¯ä¾†ç®¡ç†ï¼Œæ¯”å¦‚èªª App çš„ä¸€äº› Themeï¼Œæˆ–è€… White label ä¹‹é¡çš„é…ç½®ã€‚

## å€«æ•¦éµçš„å»ºè­°

èªªäº†ä¸€å¤§æ®µå»¢è©±æˆ‘ç›¸ä¿¡ä¸åŒå†å¤šèªªè§£é‡‹ä¸åŒéœ€æ±‚ä¸‹æœ‰ä¸åŒçš„ solution äº†ã€‚æˆ‘æ¥ä¸‹ä¾†æ‰“ç®—ç¸½çµä¸€ä¸‹æˆ‘çš„ä¸€äº›è§€é»ï¼Œä»¥åŠæˆ‘çš„ä¸€äº›åšæ³•ã€‚

### è®“ä½ çš„ App çš„ç’°å¢ƒè®Šæ•¸ç®¡ç†ä¸€é–‹å§‹ç›¡å¯èƒ½ç°¡å–®

ä½ æ²’è¾¦æ³•ä¿è­‰ä½ çš„ PM å€‘è…¦è¿´è·¯æ­£å¸¸ï¼Œä½ ä¹Ÿæ²’è¾¦æ³•æ§åˆ¶æ•´å€‹ project çš„ç™¼å±•è·¯ç·šï¼Œå› æ­¤ä½ å¿…é ˆè¦è®“ä½ çš„ project çš„ç’°å¢ƒè®Šæ•¸ç®¡ç†ä¸€é–‹å§‹å°±ç›¡å¯èƒ½ç°¡å–®ï¼Œå¾è€Œè®“ä½ å¾ŒçºŒçš„æ”¹å‹•çš„æˆæœ¬ç›¡å¯èƒ½ä½ã€‚

### è®“ä½ ç’°å¢ƒè®Šæ•¸è®ŠæˆçœŸæ­£çš„ constant

é›–ç„¶çœ¾æ‰€é€±çŸ¥, JavaScript çš„ const æ˜¯å‡çš„ï¼Œä½ é‚„æ˜¯è¢«å…è¨±ä¿®æ”¹ constant è£¡é¢ reference çš„å€¼ï¼Œä¸éåœ¨ TypeScript è£¡é¢ä¸€äº› feature å¯ä»¥å¹«æˆ‘å€‘ä¸€å®šç¨‹åº¦ä¸Šè§£æ±ºé€™å€‹å•é¡Œã€‚

```TypeScript
// env.ts
const env = {
  API_URL: process.env.API_URL,
} as const
```

æˆ‘å€‘å¯ä»¥é€šé`as const`ä¾†å¼·åˆ¶è®“è£¡é¢çš„ properties å…¨éƒ½è®Šæˆ readonlyï¼Œå¾è€Œè®“ä½ ç„¡æ³•ä¿®æ”¹è£¡é¢çš„å€¼ã€‚

### æŠŠä½ çš„ server ç’°å¢ƒè®Šé‡å’Œ client ç’°å¢ƒè®Šé‡åˆ†é–‹å¯«ï¼Œç„¶å¾Œç”¨ä½ çš„ Eslint ç‹ ç‹ é™åˆ¶ client component ä¸èƒ½ import server env

é›–ç„¶ Next.js é»˜èªåªæœ‰`NEXT_PUBLIC_`é–‹é ­çš„ç’°å¢ƒè®Šæ•¸æœƒè¢«æš´éœ²åˆ° client ç«¯ï¼Œä½†æ˜¯æˆ‘é‚„æ˜¯æœƒæ¨è–¦ç„¡è«–ä½ åœ¨ä»»ä½•æƒ…æ³éƒ½æŠŠåˆ†é–‹å­˜æ”¾ï¼Œä¸¦ä¸”ä½ æœ€å¥½åšå¥½é˜²è­·ï¼Œé…ç½®å¥½åˆé©çš„ Eslint è¦å‰‡ã€‚

```TypeScript
// env.client.ts
const clientEnv = {
  API_URL: process.env.NEXT_PUBLIC_API_URL,
} as const
```

```TypeScript
// env.server.ts
const serverEnv = {
  SECRET_KEY: process.env.SECRET_KEY,
} as const
```

ç„¶å¾Œé€™è£¡é‚„æœ‰ä¸€å€‹å‚³èªªç´šåˆ¥å¤§å‘ï¼Œæˆ‘è¦ºå¾—æœ‰å¿…è¦æä¸€ä¸‹

#### å‰ç«¯ç¥å¥‡çš„ç’°å¢ƒè®Šæ•¸ç·©å­˜

å¦‚æœä½ ç¶“å¸¸ç¢°ä¸€äº›å‰ç«¯çš„ infraï¼Œä½ ä¼°è¨ˆæœƒç¬‘å‡ºè²ï¼Œç„¡è«–ä½ æ˜¯ç”¨`Vite`é‚„æ˜¯`Next.js`ï¼Œä½ æ™‚ä¸æ™‚éƒ½æœƒé‡åˆ°é€™æ¨£çš„å•é¡Œï¼Œä½ ä¿®æ”¹çš„ç’°å¢ƒè®Šæ•¸ï¼Œä½†æ˜¯ç„¡è«–æ€éº¼é‡å•Ÿ server æˆ–è€…æ¸…ç©º project è£¡é¢çš„`build/.next` å’Œ `node_modules`ï¼Œä½ éƒ½æœƒç™¼ç¾ä½ çš„ç’°å¢ƒè®Šæ•¸æ²’æœ‰è®ŠåŒ–ï¼Œä¾èˆŠåªèƒ½ç²å–åˆ°èˆŠçš„å€¼ã€‚è€Œä¸”é€™å€‹å•é¡Œç™¼ç—…ç—‡ç‹€é‚„æœ‰æ‰€ä¸åŒï¼Œæœ‰äº›äººé‡æ–° clone project å°±è§£æ±ºäº†ï¼Œæœ‰äº›ä»€éº¼éƒ½ä¸åšç¬¬äºŒå¤©è‡ªå·±å°±å¥½äº†ã€‚å¾ˆæ…šæ„§é€™å€‹å•é¡Œæˆ‘ä¹Ÿæ²’æœ‰æ‰¾åˆ°ä¸€å€‹å®Œç¾çš„è§£æ±ºæ–¹æ¡ˆï¼Œä¹Ÿæ˜¯åªèƒ½å’Œå¤§å®¶ä¸€æ¨£ä¸€æ­¥æ­¥å˜—è©¦ã€‚

#### å¦‚æœä½ éœ€è¦é©—è­‰ç’°å¢ƒè®Šæ•¸çš„è©±ï¼Œè«‹å„ªå…ˆä½¿ç”¨ä½ æ­£åœ¨ä½¿ç”¨çš„ framework çš„é©—è­‰æ–¹å¼

æ²’æœ‰äººæœƒåå°ç’°å¢ƒè®Šæ•¸éœ€è¦è¢«é©—è­‰ï¼Œé€™ä¸€åˆ‡éƒ½æ˜¯è¦åˆ°ä½ çœŸçš„æœ‰é€™å€‹éœ€æ±‚çš„æƒ…æ³ä¸‹ã€‚å¦‚æœä½ å‰›é–‹å§‹ä¸€å€‹ project, åªæœ‰ä¸€å€‹`API_URL`ä¸€å€‹ç’°å¢ƒè®Šæ•¸ï¼Œç„¶å¾Œé€™å€‹ URL åŸºæœ¬ä¸å¯èƒ½è®ŠåŒ–ï¼Œé‚£éº¼ä½ çœŸçš„æœ‰å¿…è¦ç‚ºäº†é€™ä¸€å€‹ç’°å¢ƒè®Šæ•¸å¾ä¸€é–‹å§‹å°±å¼•å…¥å…¨å¥—é©—è­‰é‚è¼¯å—ï¼Ÿèªªå¥ä¸å¥½è½çš„ï¼Œå¦‚æœçœŸçš„å› ç‚ºåªæœ‰ä¸€å€‹`API_URL`ç’°å¢ƒè®Šæ•¸çš„æƒ…æ³ä¸‹ï¼Œä½ çš„ä»£ç¢¼èƒ½ä¸Š production ç„¶å¾Œåœ¨ production å› ç‚ºå¿˜è¨˜å‚³ç’°å¢ƒè®Šæ•¸æ›æ‰ï¼Œæœ€æ‡‰è©²æª¢è¨çš„æ˜¯æ•´å€‹é–‹ç™¼æµç¨‹æˆ–è€… CI/CD è€Œä¸æ˜¯ä»£ç¢¼ã€‚ç­‰ä½ çš„ç’°å¢ƒè®Šæ•¸å¤šäº†èµ·ä¾†ï¼ŒCI/CD è¶Šä¾†è¶Šè¤‡é›œï¼ŒåŒäº‹æ•¸é‡ä¹Ÿè®Šå¤šèµ·ä¾†ï¼Œé€™å€‹æ™‚å€™ç®¡ç†ç’°å¢ƒè®Šæ•¸æ‰æœƒçœŸæ­£è®Šæˆä¸€å€‹å•é¡Œï¼Œä½ æ‡‰è©²èŠ±æ™‚é–“å»æ€è€ƒå¦‚ä½•ç®¡ç†ä»–ã€‚

æˆ‘å€‹äººæ˜¯éå¸¸åå°å‰ç«¯å¼•å…¥åƒæ˜¯[Envalid](https://www.npmjs.com/package/envalid)é€™ç¨®åº«ï¼Œå› ç‚ºé€™å€‹åº«çš„è¨­è¨ˆåˆè¡·åªæ˜¯ç‚ºäº†åšé©—è­‰ç’°å¢ƒè®Šæ•¸ã€‚é›–ç„¶å°æ–¼ä¸€å€‹åº«ä¾†èªªï¼Œå°ˆæ³¨æ–¼ä¸€å€‹äº‹æƒ…æ˜¯å¥½äº‹ï¼Œä½†æ˜¯å°å‰ç«¯é€™ç¨®æ²’ 1kb çš„ bundle size éƒ½å¾ˆé‡è¦çš„é ˜åŸŸä¾†èªªï¼Œé€™å€‹åº«çš„ CP å€¼ä¼¼ä¹æœ‰é»å¤ªä½äº†ã€‚æˆ‘ä¸å¦èªåœ¨ä¸€äº›å¾Œç«¯ Node.js å ´æ™¯ï¼Œé€™å€‹åº«çš„ç¢ºæœ‰ä»–çš„åƒ¹å€¼ï¼Œä½†æ˜¯å°æ–¼å¤§éƒ¨åˆ†å‰ç«¯å ´æ™¯ä¾†èªªï¼Œå°å…¥é€™å€‹åº«ææ€•çœŸçš„ä¸å¦‚ä½ æ‰‹å¯«é©—è­‰ function æœ‰ CP å€¼ã€‚

è¦ç‰¹åˆ¥æ„Ÿè¬`Bryan Lee`å¤§å¤§çš„å»ºè­°ï¼Œæˆ‘å€‘æ‡‰è©²ç”¨ä¸€äº›æ›´å„ªé›…çš„æ–¹å¼é©—è­‰ç’°å¢ƒè®Šæ•¸ã€‚å°¤å…¶æ˜¯åœ¨ä½ å·²ç¶“ç”¨äº†`zod`æˆ–è€…é¤“`yup`é€™ç¨®é©—è­‰åº«çš„æƒ…æ³ä¸‹ï¼Œä½ å®Œå…¨å¯ä»¥ç›´æ¥ç”¨ä»–å€‘çš„ API ä¾†é©—è­‰ç’°å¢ƒè®Šæ•¸ã€‚

```TypeScript
import { z } from 'zod'

const envSchema = z.object({
  API_URL: z.string().url(),
})

const env = envSchema.parse(process.env)
```

ç„¶å¾Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ›´å¤šçš„`zod`çš„ API ä¾†é€²è¡Œé¡å¤–çš„é©—è­‰ï¼Œä½ æ˜¯è‡ªç”±çš„ã€‚

![freedom](./freedom.png)

ä¸éé€™ç¨®æ–¹å¼åœ¨`Next.js`è£¡é¢æœ‰å¦ä¸€å€‹å‚³èªªç´šåˆ¥å¤§å‘ï¼šä½ æ²’è¾¦æ³•å‹•æ…‹å¾`process.env`è£¡é¢ç²å–è®Šæ•¸

åƒè€ƒé€™å€‹[å›ç­”](https://stackoverflow.com/a/66626413)ï¼Œé€™åˆæ˜¯ä¸€å€‹ Next.js çš„é»‘é­”æ³•ï¼Œå¦‚æœä½ ä¸åœ¨ build time å°±ç²å–ç’°å¢ƒè®Šæ•¸ï¼Œç™¼ç¾æœ€å¾Œ`process.env`æœƒè¢«æ›¿æ›æˆ`{}`ã€‚æ‰€ä»¥ä½ å¿…é ˆè¦åœ¨ build time å°±æŠŠç’°å¢ƒè®Šé‡å–å‡ºä¾†ã€‚

```TypeScript
import { z } from 'zod'

const envSchema = z.object({
  API_URL: z.string().url(),
})

const env = envSchema.parse({
  API_URL: process.env.NEXT_PUBLIC_API_URL,
})
```

### å¦‚æœä½ åªæœ‰é secret ç’°å¢ƒè®Šæ•¸ï¼Œé‚£éº¼å¯ä»¥è€ƒæ…®çµ¦ä½ çš„ç’°å¢ƒè®Šæ•¸è¨­ç½®ä¸€å€‹ default value

æˆ‘å€‘çµ‚æ–¼è¦ä¾†èªªé€™ä¸€å€‹å¤§çˆ­è­°é»äº†ï¼Œç„¶å¾Œé€™ä¹Ÿæ˜¯ç¬¬ä¸€å€‹é»`ç›¡å¯èƒ½ç°¡å–®`çš„ callbackã€‚å„˜ç®¡å‰ç«¯é ä¸éœ€è¦åƒå¾Œç«¯ä¸€æ¨£ç®¡ç†éå¸¸å¤šçš„ç’°å¢ƒè®Šæ•¸ï¼Œä½†æ˜¯å°æ–¼ç’°å¢ƒçš„ç®¡ç†é€™ä¸€é»æ˜¯å…±é€šçš„ã€‚é¦–å…ˆæˆ‘å€‘å…ˆå®šç¾©ä¸€å€‹å…±è­˜ã€‚

æˆ‘å€‘ç¾åœ¨å…ˆå‡è¨­å¾Œç«¯ä¸€å…±æœ‰å››å€‹ç’°å¢ƒï¼Œåˆ†åˆ¥æ˜¯`development`, `qa`, `uat`, `production`ã€‚ç„¶å¾Œå‰ç«¯ä¹Ÿéœ€è¦æº–å‚™åŒæ¨£çš„å››å€‹ç’°å¢ƒï¼Œåˆ†åˆ¥æ˜¯`development`, `qa`, `uat`, `production`ã€‚

ä¹Ÿå°±æ˜¯æˆ‘å€‘æœƒæœ‰å››å€‹`.env`æª”æ¡ˆï¼Œå†åŠ ä¸Šå¦‚æœä½ çš„å‰å¾Œç«¯æ˜¯åˆ†é–‹çš„ï¼Œä½ æœ‰æ™‚å€™é‚„éœ€è¦åœ¨æœ¬åœ°è·‘èµ·é€™å€‹å¾Œç«¯ projectï¼Œä½ é‚„éœ€è¦ä¸€å€‹`.env.local`æª”æ¡ˆã€‚

```
.env.development
.env.qa
.env.uat
.env.production
.env.local
.env.example
```

å‰ç«¯å› ç‚ºå·¥å…·å¤ªå¤šå¤ªé›œçš„é—œä¿‚ï¼Œroot level ä¸‹æœƒæœ‰å¾ˆå¤šäº‚ä¸ƒå…«ç³Ÿçš„ config filesï¼Œæˆ‘ä¹‹å‰å·¥ä½œéçš„ä¸€å®¶å…¬å¸å…¬å¸çš„ä¸€å€‹ project åœ¨ project root ä¸‹è·‘`ls -1 | wc -l`å·®ä¸€é»å°±è¼¸å‡ºäº†ä¸‰ä½æ•¸ã€‚

> é€™ä¹Ÿæ˜¯å…¶ä¸­ä¸€å€‹åŸå› ç‚ºä»€éº¼å‰ç«¯éƒ½å–œæ­¡æŠŠ source code å…¨éƒ¨å¡åˆ°æŸå€‹ folder è£¡é¢ï¼Œå¾è€Œèˆ‡é…ç½®éš”é›¢

è€Œéš¨è‘—ç’°å¢ƒå¢åŠ çš„`.env`æª”æ¡ˆè‡ªç„¶æœƒåŠ åŠ‡é€™å€‹ç¾è±¡ï¼Œä¸¦ä¸”æ›´å¤šçš„ç’°å¢ƒè®Šé‡ä¹Ÿæœƒå¢åŠ ä½ åœ¨`package.json`è£¡é¢è¦å¯«çš„`scripts` alias çš„æ•¸é‡ã€‚æ–¼æ­¤åŒæ™‚ï¼Œä½ åœ¨æœ¬åœ°é–‹ç™¼çš„æ™‚å€™ï¼Œ99%çš„æƒ…æ³éƒ½åªæœƒç¢°`.env.local`ï¼Œ`.env.development`å’Œ`.env.qa`é€™ä¸‰å€‹æª”æ¡ˆï¼Œå…¶ä¸­`.env.local`æ›´æ˜¯å®Œå…¨ä¸æœƒä¸Š CI/CDï¼Œå› æ­¤`.env.local`ä¼¼ä¹å‡ºç¾äº†ä¸€äº›å­˜åœ¨ä¸»ç¾©å±æ©Ÿã€‚

æˆ‘å¾…éçš„å¹¾ä¹æ¯å€‹åœ˜éšŠæˆ–å¤šæˆ–å°‘éƒ½é‡åˆ°éé€™æ¨£çš„ä¸€å€‹å•é¡Œï¼Œä¸¦ä¸”æœ‰ç”¢ç”Ÿäº†ä¸åŒçš„è§£æ±ºæ–¹æ¡ˆï¼š

1. ç›´æ¥åˆªé™¤`.env.local`ç„¶å¾Œåœ¨æœ¬åœ°é–‹ç™¼çš„æ™‚å€™ç›´æ¥ä½¿ç”¨`.env.example`ï¼Œä¸¦ä¸”`.env.example`æœƒè¢«ä¸Šå‚³åˆ° Git.

2. ç›´æ¥åˆªé™¤æ•´å€‹`.env.local`ï¼Œç„¶å¾Œåœ¨ä»£ç¢¼è£¡é¢æŠŠ local variables ä½œç‚º default value

ç„¶å¾Œæˆ‘é€™è£¡è¦æ¨çš„å°±æ˜¯ç¬¬äºŒç¨®æ–¹æ¡ˆçš„è®Šç¨®ï¼Œæˆ‘å€‘æ ¹æœ¬ä¸éœ€è¦é¡å¤–ç¶­è­·ä¸€å€‹`.env.local`ï¼Œåœ¨ä¸€é–‹å§‹ç›´æ¥ä¸è€ƒæ…®`.env.local`ï¼Œç›´æ¥æŠŠé€™äº› variable ä½œç‚º default value å¯«åœ¨ä»£ç¢¼è£¡é¢ã€‚

```TypeScript
// env.ts
const env = {
  API_URL: process.env.API_URL || 'http://localhost:3000',
} as const
```

é€™æ¨£åšçš„å¥½è™•æ˜¯ï¼Œä½ æœ€é–‹å§‹ä¿è­‰äº†ä½ çš„ç’°å¢ƒè®Šæ•¸ç›¡å¯èƒ½ç°¡å–®ï¼Œä½ ä¸ç”¨å†ç¶­è­·ä¸€å€‹é¡å¤–çš„ç’°å¢ƒï¼Œå°¤å…¶æ˜¯ä½ æ ¹æœ¬æ²’æœ‰é€™éº¼å¤šç’°å¢ƒè®Šæ•¸çš„æƒ…æ³ä¸‹ï¼Œç„¶å¾Œå› ç‚ºä½ ä¿è­‰äº†é…ç½®çš„ç›¡å¯èƒ½ç°¡å–®ï¼Œä¹‹å¾Œå¦‚æœæœ‰é¡å¤–çš„éœ€æ±‚ï¼Œä½ ä¹Ÿå¯ä»¥ç›¡å¯èƒ½ç°¡å–®çš„ä¿®æ”¹ä½ çš„ä»£ç¢¼ã€‚

å¦‚æœä½ è¦åœ¨æœ¬åœ°é–‹ç™¼çš„æ™‚å€™ä½¿ç”¨æœ¬åœ°çš„å¾Œç«¯, ä½ åªè¦è·‘ç›´æ¥è·‘`pnpm run dev`ï¼Œç„¶å¾Œå› ç‚ºä½ æœ‰è¨­ç½®`dotenv -e .env.development`ï¼Œæ‰€ä»¥ä½ åªæœƒè®€åˆ°`.env.development`çš„å€¼ã€‚

> é€™è£¡ç”¨`dotenv-cli`åšç¤ºä¾‹ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨åˆ¥çš„ libraryã€‚

```bash
dotenv -e .env.development vite
```

ä½ ä¹Ÿå¯ä»¥çµ¦æ¯å€‹ç’°å¢ƒéƒ½åŠ ä¸Š alias

```json
"scripts": {
  "dev": "dotenv -e .env.empty vite",
  "dev:dev": "dotenv -e .env.development vite",
  "dev:qa": "dotenv -e .env.qa vite",
  "dev:uat": "dotenv -e .env.uat vite",
  "dev:production": "dotenv -e .env.production vite"
}
```

#### ç‚ºä»€éº¼è¦çµ¦æ¯å€‹ç’°å¢ƒæŒ‡å®š`dotenv -e .env.[ENV]`?

ç„¡è«–æ˜¯ Vite é‚„æ˜¯ Webpackï¼Œåœ¨è·‘æœ€æ™®é€šçš„`pnpm run dev`çš„æ™‚å€™ï¼Œè®€å–`.env`æª”æ¡ˆéƒ½æœ‰ä¸€å€‹ fallback æ©Ÿåˆ¶ã€‚

1. .env.{NODE_ENV}.local
2. .env.local
3. .env.{NODE_ENV}
4. .env

ä¹Ÿå°±æ˜¯èªªå¦‚æœè®€ä¸åˆ°`.env.{ENV}.local`ï¼Œå°±æœƒè®€å–`.env.local`ï¼Œç„¶å¾Œä¸€ç›´å¾€ä¸‹æ‰¾ï¼Œç›´åˆ°è®€åˆ°`.env`ã€‚é€™æ•´å€‹æ©Ÿåˆ¶æ˜¯æœ‰é»åç›´è¦ºçš„ï¼Œå°¤å…¶æ˜¯`.env.local`çš„å„ªå…ˆç´šè™•æ–¼`.env.{ENV}`å’Œ`.env.{ENV}.local`ä¹‹é–“ï¼Œæˆ‘æ€è€ƒäº†äº”å¹´äº†ï¼Œéƒ½æ²’æœ‰æƒ³æ˜ç™½é€™å€‹å„ªå…ˆç´šç‚ºä»€éº¼æ˜¯å…ˆ local å¾Œ envã€‚é€™éƒ½ä¸é‡è¦ï¼Œé‡é»æ˜¯é€™å€‹ fallback ç’°å¢ƒç®¡ç†è®Šå¾—ç‰¹åˆ¥è¤‡é›œï¼Œæ–¼æ­¤åŒæ™‚ï¼Œæ•´å€‹ fallback æ˜¯åŸºæ–¼`NODE_ENV`ï¼Œæ­£å¦‚å‰æ–‡æ‰€èªªï¼Œé€™ä¸ç¬¦åˆæˆ‘å€‘çš„é–‹ç™¼ç¿’æ…£ã€‚
